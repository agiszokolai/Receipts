<div class="photo">
  <img [src]="user()?.profilePictureUrl" />
</div>
<div class="description">
  <div class="name">{{ user()?.name }}</div>
  <p>&#64;{{ user()?.username }}</p>
  <div>{{ user()?.description }}</div>
  <div class="numbers">
    <span>
      <i class="fa-solid fa-receipt"></i>
      {{ user()?.createdReceiptsId?.length ?? 0 }}</span
    >
    <span
      ><i class="fa-solid fa-heart pe-2"></i> {{ userReceiptsLikes() }}</span
    >
  </div>
</div>
<hr />

@if(customerOwnProfile()) {
<div class="button-div ms-3 px-3">
  <button type="button" (click)="isCreateReceipt.set(true)">
    Recept írása
  </button>
</div>
<ng-container *ngTemplateOutlet="leftEditSide"></ng-container>

}

<app-modal
  [isModalVisible]="isCreateReceipt()"
  [formName]="'receipeForm'"
  [size]="'large'"
  [header]="'Recept létrehozása'"
  [footerButtonLabel]="'Létrehozás'"
  [isFooterCancelVisible]="true"
  (closeEvent)="isCreateReceipt.set(false)"
></app-modal>

<ng-template #leftEditSide>
  <div class="button-div ms-3 px-3">
    <button
      type="button"
      (click)="isChangeData.set(true)"
      [ngStyle]="{ display: isChangeData() ? 'none' : 'block' }"
    >
      Adatok módosítása
    </button>
    <button
      type="button"
      (click)="isChangeData.set(false)"
      [ngStyle]="{ display: !isChangeData() ? 'none' : 'block' }"
    >
      Mégse
    </button>
  </div>

  @if(isChangeData()){
  <form [formGroup]="userForm">
    <div class="form">
      <div class="form-group">
        <input type="text" id="name" formControlName="name" placeholder=" " />
        <label for="name">Név:</label>
      </div>
      <div class="form-group">
        <input
          type="text"
          id="username"
          formControlName="username"
          placeholder=" "
        />
        <label for="username">Felhasználónév:</label>
      </div>
      <div class="form-group">
        <input
          type="email"
          id="email"
          formControlName="email"
          placeholder=" "
        />
        <label for="email">E-mail cím:</label>
      </div>

      <div class="form-group mt-3">
        <textarea
          id="description"
          formControlName="description"
          placeholder=" "
          [cols]="50"
          [rows]="4"
        ></textarea>
        <label for="description">Magamról:</label>
      </div>
    </div>

    <div class="button-div">
      <button type="submit">Mentés</button>
    </div>
  </form>

  <hr />

  <form [formGroup]="passwordForm">
    <div class="form">
      <div class="form-group">
        <input
          type="password"
          id="password"
          formControlName="password"
          placeholder=" "
        />
        <label for="password">Jelszó:</label>
      </div>
      <div class="form-group">
        <input
          type="password"
          id="passwordConfirm"
          formControlName="passwordConfirm"
          placeholder=" "
        />
        <label for="passwordConfirm">Jelszó megerősítése:</label>
      </div>
    </div>

    <div class="button-div">
      <button type="submit">Mentés</button>
    </div>
  </form>
  }
</ng-template>
